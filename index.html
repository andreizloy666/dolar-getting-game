<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dollar Getting - Themed</title>
    <style>
        /* --- GENERAL STYLES --- */
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #2e7d32;
            overflow: hidden;
            position: relative;
        }

        .falling-elements-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            perspective: 800px;
        }

        .falling-item {
            position: absolute;
            font-size: 2.5em;
            line-height: 1;
            opacity: 0.7;
            will-change: transform, opacity;
            filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.3));
        }
        
        @keyframes fallAndRotate {
            0% {
                transform: translate3d(var(--start-x), var(--start-y), 0) rotateZ(0deg) rotateY(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            100% {
                transform: translate3d(var(--end-x), 110vh, var(--depth)) rotateZ(var(--z-rot)) rotateY(var(--y-rot));
                opacity: 0;
            }
        }

        #game-container {
            text-align: center;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.6);
            z-index: 10;
            position: relative;
            background: linear-gradient(180deg, #5cb85c 0%, #449d44 100%);
            border: 6px solid #2e7d32;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="80" height="40"><text x="5" y="30" style="font-size: 30px; fill:%232e7d32; opacity: 0.2;"></text></svg>');
            background-size: 80px 40px;
            background-repeat: repeat;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1#game-title {
            font-size: 2.8em;
            margin-bottom: 10px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            letter-spacing: 1px;
        }

        #score-display {
            font-size: 3em;
            margin-bottom: 30px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            font-weight: bold;
        }
        
        #click-button {
            padding: 25px 50px;
            font-size: 1.8em;
            cursor: pointer;
            background: linear-gradient(180deg, #5cb85c 0%, #449d44 100%);
            color: white;
            border: 3px solid #3d8f3d;
            border-radius: 10px;
            box-shadow: 0 5px 0 #3d8f3d, 0 8px 15px rgba(0,0,0,0.3);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            transition: all 0.1s ease;
            font-weight: bold;
            letter-spacing: 0.5px;
        }

        #click-button:hover {
            background: linear-gradient(180deg, #449d44 0%, #5cb85c 100%);
            transform: translateY(1px);
            box-shadow: 0 3px 0 #3d8f3d, 0 6px 12px rgba(0,0,0,0.3);
        }

        #click-button:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 #3d8f3d, 0 4px 8px rgba(0,0,0,0.3);
        }

        #shop-button {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #00bcd4;
            color: white;
            font-size: 2.2em;
            border: 4px solid #0097a7;
            cursor: pointer;
            box-shadow: 0 3px 0 #0097a7, 0 5px 10px rgba(0,0,0,0.4);
            transition: transform 0.1s;
            line-height: 60px;
            text-align: center;
            z-index: 15;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #shop-button:active {
            transform: translateY(2px);
            box-shadow: 0 1px 0 #0097a7, 0 3px 6px rgba(0,0,0,0.4);
        }

        #shop-modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fefefe;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
            width: 80%;
            max-width: 450px;
            color: #333;
            text-align: left;
            position: relative;
        }

        .modal-content h2 {
            text-align: center;
            color: #2e7d32;
            margin-top: 0;
        }

        .close-shop-button {
            position: absolute;
            top: -15px;
            right: -15px;
            width: 40px;
            height: 40px;
            background-color: #f44336;
            border-radius: 50%;
            border: 2px solid white;
            cursor: pointer;
            line-height: 40px;
            text-align: center;
            font-size: 20px;
            color: white;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            transition: background-color 0.1s;
        }
        
        .close-shop-button::before, .close-shop-button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 70%;
            height: 4px;
            background: white;
            border-radius: 2px;
        }
        
        .close-shop-button::before {
            transform: translate(-50%, -50%) rotate(45deg);
        }
        
        .close-shop-button::after {
            transform: translate(-50%, -50%) rotate(-45deg);
        }

        .close-shop-button:hover {
            background-color: #d32f2f;
        }
        
        /* --- SHOP STYLES (New Look) --- */

        .shop-item-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0; 
            margin-bottom: 15px;
            background-color: #f0f0f0;
            border-radius: 30px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: relative;
            padding-right: 5px;
            border: 2px solid #ddd;
        }
        
        .item-details {
            padding: 5px 15px;
            flex-grow: 1;
        }
        
        .item-details p {
            margin: 2px 0;
            font-size: 0.9em;
        }

        .item-details strong {
            font-size: 1.1em;
            color: #4CAF50;
        }

        .buy-button-container {
            padding: 8px 15px;
            background-color: #4CAF50;
            border-radius: 30px;
            box-shadow: 0 3px 0 #3d8f3d;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
            cursor: pointer;
        }
        
        .buy-button-container:hover:not(.disabled) {
            background-color: #45a049;
        }
        
        .buy-button-container.disabled {
            background-color: #ccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        .buy-button {
            background: none;
            border: none;
            color: white;
            font-weight: bold;
            font-size: 1em;
            cursor: inherit;
            padding: 0;
            white-space: nowrap;
        }

        /* --- CLICK ANIMATION STYLES --- */
        .click-effect {
            position: absolute;
            font-size: 1.5em;
            opacity: 0;
            animation: clickPop 0.8s ease-out forwards;
            pointer-events: none;
            z-index: 11;
            white-space: nowrap;
            transform: translate(-50%, -50%);
            filter: drop-shadow(0px 1px 1px rgba(0,0,0,0.3));
        }

        @keyframes clickPop {
            0% {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 1;
            }
            100% {
                transform: translate(var(--end-x-offset), var(--end-y-offset)) scale(1.2);
                opacity: 0;
            }
        }
        
        #passive-info {
            font-size: 0.9em;
            color: #eee;
            margin-top: 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        #multiplier-info {
            font-size: 0.9em;
            color: #eee;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body>

    <div class="falling-elements-background" id="falling-elements-background"></div>

    <div id="game-container">
        <button id="shop-button">
            ðŸ’Ž
        </button>

        <h1 id="game-title">Dollar Getting</h1>
        <div id="score-display">Score: 0</div>
        
        <div id="passive-info"></div>
        <div id="multiplier-info"></div>
        
        <button id="click-button">Click To Get Dollar!</button>
    </div>

    <div id="shop-modal">
        <div class="modal-content">
            <div class="close-shop-button" id="close-modal-button"></div>
            
            <h2>Shop Upgrades</h2>

            <div class="shop-item-row" id="passive-upgrade-item">
                <div class="item-details">
                    <p><strong>ðŸŒ± Passive Income</strong></p>
                    <p>Upgrades: <span id="passive-upgrade-count-display">0</span></p>
                    <p>Effect: +1 score every 5s</p>
                </div>
                <div class="buy-button-container" id="buy-passive-upgrade-container">
                    <button id="buy-passive-upgrade-button" class="buy-button">
                        BUY<br>(<span id="passive-upgrade-cost-display">10</span>)
                    </button>
                </div>
            </div>
            
            <div class="shop-item-row" id="multiplier-upgrade-item">
                <div class="item-details">
                    <p><strong>âœ¨ Click Multiplier</strong></p>
                    <p>Level: x<span id="multiplier-value-display">1</span></p>
                    <p>Next: x<span id="next-multiplier-value">2</span></p>
                </div>
                <div class="buy-button-container" id="buy-multiplier-upgrade-container">
                    <button id="buy-multiplier-upgrade-button" class="buy-button">
                        BUY<br>(<span id="multiplier-upgrade-cost-display">100</span>)
                    </button>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- GAME STATE VARIABLES ---
        let score = 0;
        
        // Passive Income variables
        let passiveIncomePerInterval = 0;
        let passiveUpgradeCost = 10;
        let passiveUpgradeCount = 0;
        let passiveIntervalId = null;

        // Click Multiplier variables
        let clickMultiplier = 1;
        let multiplierUpgradeCost = 100;
        let multiplierUpgradeCount = 0;

        const PASSIVE_INTERVAL_MS = 5000;

        // --- DOM ELEMENTS ---
        const scoreDisplay = document.getElementById('score-display');
        const passiveInfoDisplay = document.getElementById('passive-info');
        const multiplierInfoDisplay = document.getElementById('multiplier-info'); 
        const clickButton = document.getElementById('click-button');
        const shopModal = document.getElementById('shop-modal');
        const shopButton = document.getElementById('shop-button');
        const closeModalButton = document.getElementById('close-modal-button');
        
        // Passive Upgrade DOM elements
        const passiveUpgradeCostDisplay = document.getElementById('passive-upgrade-cost-display');
        const passiveUpgradeCountDisplay = document.getElementById('passive-upgrade-count-display');
        const buyPassiveUpgradeContainer = document.getElementById('buy-passive-upgrade-container');

        // Multiplier Upgrade DOM elements
        const multiplierUpgradeCostDisplay = document.getElementById('multiplier-upgrade-cost-display');
        const multiplierValueDisplay = document.getElementById('multiplier-value-display');
        const nextMultiplierValueDisplay = document.getElementById('next-multiplier-value'); 
        const buyMultiplierUpgradeContainer = document.getElementById('buy-multiplier-upgrade-container');
        
        const fallingElementsBackground = document.getElementById('falling-elements-background');
        
        const backgroundItems = ['ðŸ’¸', 'ðŸ’°', 'ðŸ’µ', 'ðŸª™']; 
        const clickEffectItems = ['ðŸ’²', 'âœ¨', 'ðŸŒŸ']; // Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐž
        
        // --- SAVE/LOAD FUNCTIONS ---
        function saveGame() {
            const gameState = {
                score: score,
                passiveIncomePerInterval: passiveIncomePerInterval,
                passiveUpgradeCost: passiveUpgradeCost,
                passiveUpgradeCount: passiveUpgradeCount,
                clickMultiplier: clickMultiplier,
                multiplierUpgradeCost: multiplierUpgradeCost,
                multiplierUpgradeCount: multiplierUpgradeCount
            };
            localStorage.setItem('DollarGettingSave', JSON.stringify(gameState));
        }

        function loadGame() {
            const savedState = localStorage.getItem('DollarGettingSave');
            if (savedState) {
                const gameState = JSON.parse(savedState);
                
                score = gameState.score || 0;
                passiveIncomePerInterval = gameState.passiveIncomePerInterval || 0;
                passiveUpgradeCost = gameState.passiveUpgradeCost || 10;
                passiveUpgradeCount = gameState.passiveUpgradeCount || 0;

                clickMultiplier = gameState.clickMultiplier || 1;
                multiplierUpgradeCost = gameState.multiplierUpgradeCost || 100;
                multiplierUpgradeCount = gameState.multiplierUpgradeCount || 0;

                if (passiveUpgradeCount > 0) {
                    startPassiveIncome();
                }
            }
        }

        // --- DISPLAY & UI UPDATES ---
        function updateScoreDisplay() {
            scoreDisplay.textContent = 'Score: ' + score;
            updateShopDisplay(); 
            updatePassiveInfo(); 
            updateMultiplierInfo();
            saveGame();
        }

        function updatePassiveInfo() {
            if (passiveUpgradeCount > 0) {
                passiveInfoDisplay.textContent = `Passive Income: +${passiveIncomePerInterval} / 5s`;
            } else {
                passiveInfoDisplay.textContent = '';
            }
        }
        
        function updateMultiplierInfo() {
            if (clickMultiplier > 1) {
                multiplierInfoDisplay.textContent = `Click Multiplier: x${clickMultiplier}`;
            } else {
                multiplierInfoDisplay.textContent = '';
            }
        }

        function startPassiveIncome() {
            if (passiveIntervalId) {
                clearInterval(passiveIntervalId);
            }
            passiveIntervalId = setInterval(() => {
                if (passiveIncomePerInterval > 0) {
                    score += passiveIncomePerInterval;
                    updateScoreDisplay();
                }
            }, PASSIVE_INTERVAL_MS);
        }
        
        function openShop() {
            shopModal.style.display = 'flex';
            updateShopDisplay();
        }

        function closeShop() {
            shopModal.style.display = 'none';
        }

        function updateShopDisplay() {
            // Passive Income
            passiveUpgradeCostDisplay.textContent = passiveUpgradeCost;
            passiveUpgradeCountDisplay.textContent = passiveUpgradeCount;
            if (score >= passiveUpgradeCost) {
                buyPassiveUpgradeContainer.classList.remove('disabled');
            } else {
                buyPassiveUpgradeContainer.classList.add('disabled');
            }
            
            // Click Multiplier
            multiplierUpgradeCostDisplay.textContent = multiplierUpgradeCost;
            multiplierValueDisplay.textContent = clickMultiplier;
            nextMultiplierValueDisplay.textContent = clickMultiplier * 2; 
            if (score >= multiplierUpgradeCost) {
                buyMultiplierUpgradeContainer.classList.remove('disabled');
            } else {
                buyMultiplierUpgradeContainer.classList.add('disabled');
            }
        }
        
        // --- UPGRADE BUYING LOGIC ---
        function buyPassiveUpgrade() {
            if (score >= passiveUpgradeCost) {
                score -= passiveUpgradeCost; 
                passiveIncomePerInterval += 1;
                passiveUpgradeCount++;
                passiveUpgradeCost = Math.ceil(passiveUpgradeCost * 1.5); 
                if (passiveUpgradeCount === 1) {
                    startPassiveIncome(); 
                }
                updateScoreDisplay(); 
            }
        }

        function buyMultiplierUpgrade() {
            if (score >= multiplierUpgradeCost) {
                score -= multiplierUpgradeCost;
                clickMultiplier *= 2; 
                multiplierUpgradeCount++;
                multiplierUpgradeCost = Math.ceil(multiplierUpgradeCost * 5); 
                updateScoreDisplay();
            }
        }

        // Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ: Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸ÑŽ ÐºÐ»Ð¸ÐºÐ°
        function handleClick(event) {
            score += 1 * clickMultiplier;
            updateScoreDisplay();
            spawnClickEffect(event.clientX, event.clientY);
        }
        
        // --- ANIMATION LOGIC ---
        function createFallingItem() {
            const item = document.createElement('span');
            item.classList.add('falling-item');
            
            item.textContent = backgroundItems[Math.floor(Math.random() * backgroundItems.length)];
            
            const duration = Math.random() * 10 + 10; 
            const delay = Math.random() * 20; 
            const startX = Math.random() * 100 + 'vw'; 
            const startY = Math.random() * -30 + 'vh';
            const endXOffset = (Math.random() * 300 - 150) + 'px';
            const depth = (Math.random() * 200 - 100) + 'px'; 
            const rotZ = Math.random() * 720 - 360 + 'deg';
            const rotY = Math.random() * 720 - 360 + 'deg';

            item.style.left = startX;
            item.style.top = startY;
            item.style.animationDuration = duration + 's';
            item.style.animationDelay = delay + 's';
            item.style.animationName = 'fallAndRotate';

            item.style.setProperty('--start-x', startX);
            item.style.setProperty('--start-y', startY);
            item.style.setProperty('--end-x', endXOffset);
            item.style.setProperty('--z-rot', rotZ);
            item.style.setProperty('--y-rot', rotY);
            item.style.setProperty('--depth', depth);
            
            fallingElementsBackground.appendChild(item);

            item.addEventListener('animationiteration', () => {
                item.remove();
                createFallingItem();
            });
            item.addEventListener('animationend', (e) => {
                if (e.animationName === 'fallAndRotate' && item.parentNode) {
                    item.remove();
                    createFallingItem();
                }
            });
        }

        const NUM_FALLING_ITEMS = 60;
        for (let i = 0; i < NUM_FALLING_ITEMS; i++) {
            createFallingItem();
        }

        function spawnClickEffect(clientX, clientY) {
            const effect = document.createElement('span');
            effect.classList.add('click-effect');
            
            let effectText = '';
            for(let i = 0; i < 3; i++) {
                effectText += clickEffectItems[Math.floor(Math.random() * clickEffectItems.length)];
            }
            effect.textContent = effectText;

            effect.style.left = clientX + 'px';
            effect.style.top = clientY + 'px';

            const endXOffset = (Math.random() * 100 - 50) + 'px';
            const endYOffset = (Math.random() * 100 - 50) + 'px';
            effect.style.setProperty('--end-x-offset', endXOffset);
            effect.style.setProperty('--end-y-offset', endYOffset);
            
            document.body.appendChild(effect);

            effect.addEventListener('animationend', () => {
                effect.remove();
            });
        }

        // --- EVENT LISTENERS (Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾ Ð´Ð»Ñ Ð¿Ñ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ Ð½ÐµÐ¶ÐµÐ»Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ð¹) ---
        clickButton.addEventListener('click', handleClick);
        shopButton.addEventListener('click', openShop);
        closeModalButton.addEventListener('click', closeShop); 
        
        // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ e.stopPropagation() Ð´Ð»Ñ Ð¿Ñ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ "ÐºÐ»Ð¸Ðº-Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ð¸" Ð½Ð° Ñ„Ð¾Ð½Ðµ Ð¿Ñ€Ð¸ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐµ
        buyPassiveUpgradeContainer.addEventListener('click', (e) => {
            e.stopPropagation(); 
            buyPassiveUpgrade();
        });
        buyMultiplierUpgradeContainer.addEventListener('click', (e) => {
            e.stopPropagation();
            buyMultiplierUpgrade();
        });

        window.addEventListener('click', (event) => {
            if (event.target === shopModal) {
                closeShop();
            }
        });
        
        // --- INITIALIZATION ---
        loadGame(); 
        updateScoreDisplay();
        window.onbeforeunload = saveGame;
    </script>
</body>
</html>
